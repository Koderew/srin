<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta property="og:site_name" content="Rural Inscribe Status">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rural Inscribe Status</title>
    <meta name="description" content="Rural Inscribe Status page">
    <meta property="og:url" content="https://status.ruralinscribe.net/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Rural Inscribe Status">
    <meta property="og:description" content="Rural Inscribe Status page">
    <meta property="og:image" content="https://ruralinscribe.net/hq-ri.net.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="status.ruralinscribe.net">
    <meta property="twitter:url" content="https://status.ruralinscribe.net/">
    <meta name="twitter:title" content="Rural Inscribe Status">
    <meta name="twitter:description" content="Rural Inscribe Status page">
    <meta name="twitter:image" content="https://ruralinscribe.net/hq-ri.net.png">
    <!-- Default to light mode -->
    <link id="theme-stylesheet" rel="stylesheet" href="styles.css">
    <script>
        // Detects the user's theme
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.getElementById('theme-stylesheet').setAttribute('href', 'dark-styles.css');
        }
    </script>
</head>

<body>
    <div class="status-container">
        <h1>Rural Inscribe Status</h1>

        <div class="dropdown-container">
            <select id="service-dropdown" class="dropdown" onchange="updateStatus()">
                <option value="all">All</option>
                <option value="server1">Server 1</option>
                <option value="server2">Server 2</option>
            </select>
        </div>

        <div class="status-message" id="status-message">
            Our service(s) are currently:
            <div class="status-indicator down" id="status-indicator">Non-operational.</div>
        </div>

        <details id="info-section" style="display:none;">
            <summary>Service Information</summary>
            <div class="details-content" id="info-content">
                <p>Service-specific information will appear here.</p>
            </div>
        </details>

        <details>
            <summary>Details</summary>
            <div class="details-content" id="details-content">
                <p>Services are correctly down.</p>
            </div>
        </details>

        <div class="footer">
            Last checked: <span id="last-checked" data-time="2024-10-24T1:13:32-04:00"></span>
        </div>
    </div>

    <script>
        const statusData = {
            all: {
                status: "Partially operational.",
                statusClass: "half",
                details: "Both services are working correctly with minor issues."
            },
            server1: {
                status: "Non-operational.",
                statusClass: "down",
                details: "Server 1 is currently down. This issue will get resolved as soon as possible.",
                info: "Server 1 hosts Rural Inscribe itself. Rural Inscribe is not distributed."
            },
            server2: {
                status: "Degraded service.",
                statusClass: "half",
                details: "Server 2 is currently under maintenance. Everything should still work fine. ETA. ~1 day left.",
                info: "Server 2 handles everything else that is not commonly associated with Rural Inscribe, as it is more powerful."
            }
        };

        function updateStatus() {
            const selectedService = document.getElementById("service-dropdown").value;
            const statusMessage = document.getElementById("status-message");
            const statusIndicator = document.getElementById("status-indicator");
            const detailsContent = document.getElementById("details-content");
            const infoSection = document.getElementById("info-section");
            const infoContent = document.getElementById("info-content");

            // Update status message and status indicator class
            statusIndicator.textContent = statusData[selectedService].status;
            statusIndicator.className = `status-indicator ${statusData[selectedService].statusClass}`;

            // Update details section
            detailsContent.innerHTML = `<p>${statusData[selectedService].details}</p>`;

            // Show or hide info section based on service selection (hide for "All")
            if (selectedService === "all") {
                infoSection.style.display = "none";
            } else {
                infoSection.style.display = "block";
                infoContent.innerHTML = `<p>${statusData[selectedService].info}</p>`;
            }
        }

        function formatDate(date) {
            const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit', timeZoneName: 'short' };
            return new Intl.DateTimeFormat('en-US', options).format(date);
        }

        function updateLastChecked() {
            const element = document.getElementById('last-checked');
            const timestamp = element.getAttribute('data-time');
            const date = new Date(timestamp);
            element.textContent = formatDate(date);
        }

        updateLastChecked();
    </script>
</body>

</html>
